<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>gov.nsa.datawave</groupId>
        <artifactId>assemble-parent</artifactId>
        <version>2.6.31</version>
    </parent>
    <artifactId>assemble-datawave</artifactId>
    <packaging>pom</packaging>
    <name>${project.artifactId}</name>
    <dependencies>
        <!-- To ensure a consistent version is loaded -->
        <dependency>
            <groupId>com.clearspring.analytics</groupId>
            <artifactId>stream</artifactId>
        </dependency>
        <dependency>
            <groupId>com.esotericsoftware.minlog</groupId>
            <artifactId>minlog</artifactId>
        </dependency>
        <dependency>
            <groupId>com.googlecode.json-simple</groupId>
            <artifactId>json-simple</artifactId>
        </dependency>
        <dependency>
            <groupId>commons-logging</groupId>
            <artifactId>commons-logging</artifactId>
        </dependency>
        <dependency>
            <groupId>gov.nsa.datawave</groupId>
            <artifactId>datawave-balancers</artifactId>
        </dependency>
        <dependency>
            <groupId>gov.nsa.datawave</groupId>
            <artifactId>datawave-common</artifactId>
        </dependency>
        <dependency>
            <groupId>gov.nsa.datawave</groupId>
            <artifactId>datawave-core</artifactId>
        </dependency>
        <dependency>
            <groupId>gov.nsa.datawave</groupId>
            <artifactId>datawave-data-dictionary-core</artifactId>
        </dependency>
        <dependency>
            <groupId>gov.nsa.datawave</groupId>
            <artifactId>datawave-edge-dictionary-core</artifactId>
        </dependency>
        <dependency>
            <groupId>gov.nsa.datawave</groupId>
            <artifactId>datawave-edge-model-configuration-core</artifactId>
        </dependency>
        <dependency>
            <groupId>gov.nsa.datawave</groupId>
            <artifactId>datawave-index-stats</artifactId>
            <version>${project.version}</version>
        </dependency>
        <dependency>
            <groupId>gov.nsa.datawave</groupId>
            <artifactId>datawave-ingest-configuration</artifactId>
        </dependency>
        <dependency>
            <groupId>gov.nsa.datawave</groupId>
            <artifactId>datawave-ingest-core</artifactId>
        </dependency>
        <dependency>
            <groupId>gov.nsa.datawave</groupId>
            <artifactId>datawave-ingest-csv</artifactId>
        </dependency>
        <dependency>
            <groupId>gov.nsa.datawave</groupId>
            <artifactId>datawave-ingest-json</artifactId>
            <version>${project.version}</version>
        </dependency>
        <dependency>
            <groupId>gov.nsa.datawave</groupId>
            <artifactId>datawave-ingest-nyctlc</artifactId>
            <version>${project.version}</version>
        </dependency>
        <dependency>
            <groupId>gov.nsa.datawave</groupId>
            <artifactId>datawave-ingest-scripts</artifactId>
        </dependency>
        <dependency>
            <groupId>gov.nsa.datawave</groupId>
            <artifactId>datawave-ingest-wikipedia</artifactId>
            <version>${project.version}</version>
        </dependency>
        <dependency>
            <groupId>gov.nsa.datawave</groupId>
            <artifactId>datawave-metrics-core</artifactId>
        </dependency>
        <dependency>
            <groupId>gov.nsa.datawave</groupId>
            <artifactId>datawave-query-core</artifactId>
        </dependency>
        <dependency>
            <groupId>gov.nsa.datawave.webservices</groupId>
            <artifactId>datawave-ws-client</artifactId>
        </dependency>
        <dependency>
            <groupId>gov.nsa.datawave.webservices</groupId>
            <artifactId>datawave-ws-common</artifactId>
        </dependency>
        <dependency>
            <groupId>gov.nsa.datawave.webservices</groupId>
            <artifactId>datawave-ws-common-util</artifactId>
        </dependency>
        <dependency>
            <groupId>gov.nsa.datawave.webservices</groupId>
            <artifactId>datawave-ws-query</artifactId>
        </dependency>
        <dependency>
            <groupId>io.dropwizard.metrics</groupId>
            <artifactId>metrics-core</artifactId>
        </dependency>
        <dependency>
            <groupId>io.netty</groupId>
            <artifactId>netty-all</artifactId>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-jci-core</artifactId>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-jci-fam</artifactId>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-lang3</artifactId>
        </dependency>
        <dependency>
            <groupId>org.infinispan</groupId>
            <artifactId>infinispan-core</artifactId>
        </dependency>
        <dependency>
            <groupId>org.jgroups</groupId>
            <artifactId>jgroups</artifactId>
        </dependency>
        <dependency>
            <groupId>com.github.ben-manes.caffeine</groupId>
            <artifactId>caffeine</artifactId>
            <version>${version.caffeine}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.jboss.logging</groupId>
            <artifactId>jboss-logging</artifactId>
            <!-- wildfly bom brings this in as provided, but we need it at runtime for MapReduce jobs -->
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context-support</artifactId>
            <scope>runtime</scope>
        </dependency>
    </dependencies>
    <profiles>
        <profile>
            <!--
				This profile should be used to scp and unpack the tar.gz on a remote
				server It requires a definition of these variables (easiest to do in
				your settings.xml): - ci.ssh.username - ci.ssh.hostname -
				ci.ssh.host.dest.dir
			-->
            <id>cbdeploy</id>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>exec-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>scp</id>
                                <goals>
                                    <goal>exec</goal>
                                </goals>
                                <phase>deploy</phase>
                                <configuration>
                                    <executable>/usr/bin/scp</executable>
                                    <commandlineArgs>${project.build.directory}/${project.artifactId}-${project.version}-dist.tar.gz
										${ci.ssh.username}@${ci.ssh.hostname}:${ci.ssh.host.dest.dir}</commandlineArgs>
                                </configuration>
                            </execution>
                            <execution>
                                <id>unpack</id>
                                <goals>
                                    <goal>exec</goal>
                                </goals>
                                <phase>deploy</phase>
                                <configuration>
                                    <executable>/usr/bin/ssh</executable>
                                    <commandlineArgs>${ci.ssh.username}@${ci.ssh.hostname}
										"cd ${ci.ssh.host.dest.dir} &amp;&amp; tar zxvf ${ci.ssh.host.dest.dir}/${project.artifactId}-${project.version}-dist.tar.gz"</commandlineArgs>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>assemble</id>
            <activation>
                <property>
                    <name>tar</name>
                </property>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <!-- Activate the assert-properties plugin -->
                        <groupId>gov.nsa.datawave.plugins</groupId>
                        <artifactId>assert-properties</artifactId>
                        <executions>
                            <execution>
                                <id>assert-properties</id>
                                <goals>
                                    <goal>assert-properties</goal>
                                </goals>
                                <phase>initialize</phase>
                                <configuration>
                                    <expectedPropertyNames>${project.basedir}/assert/expected-properties.txt</expectedPropertyNames>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <plugin>
                        <artifactId>maven-assembly-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>assembly</id>
                                <goals>
                                    <goal>single</goal>
                                </goals>
                                <phase>package</phase>
                                <configuration>
                                    <finalName>datawave-${build.env}-${project.version}</finalName>
                                    <descriptors combine.children="append">
                                        <descriptor>src/main/assembly/dist.xml</descriptor>
                                    </descriptors>
                                    <tarLongFileMode>posix</tarLongFileMode>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <plugin>
                        <artifactId>maven-dependency-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>unpack-scripts</id>
                                <goals>
                                    <goal>unpack</goal>
                                </goals>
                                <phase>generate-resources</phase>
                                <configuration>
                                    <artifactItems>
                                        <artifactItem>
                                            <groupId>gov.nsa.datawave</groupId>
                                            <artifactId>datawave-ingest-scripts</artifactId>
                                        </artifactItem>
                                    </artifactItems>
                                    <excludes>META-INF/**,bin/ingest/ingest-versions.sh,bin/ingest/ingest-env.sh,bin/system/install.sh</excludes>
                                    <outputDirectory>${project.build.directory}/archive</outputDirectory>
                                </configuration>
                            </execution>
                            <execution>
                                <id>unpack-regression-testing</id>
                                <goals>
                                    <goal>unpack</goal>
                                </goals>
                                <phase>generate-resources</phase>
                                <configuration>
                                    <artifactItems>
                                        <artifactItem>
                                            <groupId>gov.nsa.datawave</groupId>
                                            <artifactId>datawave-regression-testing</artifactId>
                                        </artifactItem>
                                    </artifactItems>
                                    <excludes>META-INF/**</excludes>
                                    <outputDirectory>${project.build.directory}/archive</outputDirectory>
                                </configuration>
                            </execution>
                            <execution>
                                <id>unpack-scripts-to-filter</id>
                                <goals>
                                    <goal>unpack</goal>
                                </goals>
                                <phase>generate-resources</phase>
                                <configuration>
                                    <artifactItems>
                                        <artifactItem>
                                            <groupId>gov.nsa.datawave</groupId>
                                            <artifactId>datawave-ingest-scripts</artifactId>
                                        </artifactItem>
                                    </artifactItems>
                                    <includes>bin/ingest/ingest-versions.sh,bin/ingest/ingest-env.sh,bin/ingest/tables-env.sh,bin/system/install.sh</includes>
                                    <outputDirectory>${project.build.directory}/archive-tmp</outputDirectory>
                                </configuration>
                            </execution>
                            <execution>
                                <id>unpack-config</id>
                                <goals>
                                    <goal>unpack</goal>
                                </goals>
                                <phase>generate-resources</phase>
                                <configuration>
                                    <artifactItems>
                                        <artifactItem>
                                            <groupId>gov.nsa.datawave</groupId>
                                            <artifactId>datawave-ingest-configuration</artifactId>
                                        </artifactItem>
                                    </artifactItems>
                                    <excludes>META-INF/**</excludes>
                                    <outputDirectory>${project.build.directory}/archive-tmp</outputDirectory>
                                </configuration>
                            </execution>
                            <execution>
                                <id>copy-dependencies</id>
                                <goals>
                                    <goal>copy-dependencies</goal>
                                </goals>
                                <phase>process-resources</phase>
                                <configuration>
                                    <outputDirectory>${project.build.directory}/archive/lib</outputDirectory>
                                    <overWriteIfNewer>true</overWriteIfNewer>
                                    <excludeScope>provided</excludeScope>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <plugin>
                        <artifactId>maven-resources-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>copy-filtered-scripts</id>
                                <goals>
                                    <goal>copy-resources</goal>
                                </goals>
                                <phase>process-resources</phase>
                                <configuration>
                                    <outputDirectory>${project.build.directory}/archive/bin</outputDirectory>
                                    <resources>
                                        <resource>
                                            <directory>${project.build.directory}/archive-tmp/bin</directory>
                                            <filtering>true</filtering>
                                        </resource>
                                    </resources>
                                </configuration>
                            </execution>
                            <execution>
                                <id>copy-filtered-config</id>
                                <goals>
                                    <goal>copy-resources</goal>
                                </goals>
                                <phase>process-resources</phase>
                                <configuration>
                                    <outputDirectory>${project.build.directory}/archive/config</outputDirectory>
                                    <resources>
                                        <resource>
                                            <directory>${project.build.directory}/archive-tmp/config</directory>
                                            <filtering>true</filtering>
                                        </resource>
                                    </resources>
                                </configuration>
                            </execution>
                            <execution>
                                <id>copy-certificates</id>
                                <goals>
                                    <goal>copy-resources</goal>
                                </goals>
                                <phase>process-resources</phase>
                                <configuration>
                                    <outputDirectory>${project.build.directory}/archive/certificates</outputDirectory>
                                    <resources>
                                        <resource>
                                            <directory>${project.build.directory}/archive-tmp/certificates</directory>
                                            <filtering>false</filtering>
                                        </resource>
                                    </resources>
                                </configuration>
                            </execution>
                            <execution>
                                <id>copy-additional-env</id>
                                <goals>
                                    <goal>copy-resources</goal>
                                </goals>
                                <phase>process-resources</phase>
                                <configuration>
                                    <outputDirectory>${project.build.directory}/archive/</outputDirectory>
                                    <resources>
                                        <resource>
                                            <directory>${project.basedir}/src/main/resources</directory>
                                        </resource>
                                    </resources>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <!--
				WARNING WARNING WARNING

				If you change anything in this profile regarding which files are included, then you need to make the
				corresponding change in src/main/assembly/dist.xml.  Unfortunately, there is no way for the RPM and
				assembly plugins to share the same configuration, so this information must be duplicated.
			-->
            <id>rpm</id>
            <build>
                <plugins>
                    <plugin>
                        <groupId>gov.nsa.datawave.plugins</groupId>
                        <artifactId>assert-properties</artifactId>
                        <executions>
                            <execution>
                                <id>assert-properties</id>
                                <goals>
                                    <goal>assert-properties</goal>
                                </goals>
                                <phase>initialize</phase>
                                <configuration>
                                    <expectedPropertyNames>${project.basedir}/assert/expected-properties.txt</expectedPropertyNames>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>rpm-maven-plugin</artifactId>
                        <configuration>
                            <name>datawave-dw-${build.env}</name>
                            <group>Applications/File</group>
                            <copyright>TODO.org</copyright>
                            <autoRequires>false</autoRequires>
                            <defaultDirmode>0755</defaultDirmode>
                            <defaultFilemode>0444</defaultFilemode>
                            <defaultUsername>${rpm.file.owner}</defaultUsername>
                            <defaultGroupname>${rpm.file.group}</defaultGroupname>
                            <description>The DATAWAVE data warehouse software stack. This package writes libraries into the accumulo installation as well.</description>
                            <defineStatements>
                                <defineStatement>debug_package %{nil}</defineStatement>
                                <defineStatement>__os_install_post %{nil}</defineStatement>
                            </defineStatements>
                            <postinstallScriptlet>
                                <script>/opt/datawave-ingest/current/bin/system/install.sh -force</script>
                            </postinstallScriptlet>
                            <cleanScriptlet>
                                <script>rm -rf $RPM_BUILD_ROOT</script>
                            </cleanScriptlet>
                            <mappings combine.children="append">
                                <!-- Link the current pointer to the distro we just installed -->
                                <mapping>
                                    <directory>/opt/datawave-ingest/current</directory>
                                    <sources>
                                        <softlinkSource>
                                            <location>/opt/datawave-ingest/datawave-${build.env}-${project.version}</location>
                                        </softlinkSource>
                                    </sources>
                                </mapping>
                                <!-- Define a mapping for just the directory so ownership is set right. -->
                                <mapping>
                                    <directory>/opt/datawave-ingest</directory>
                                    <username>${rpm.file.owner}</username>
                                    <groupname>${rpm.file.group}</groupname>
                                    <filemode>0755</filemode>
                                </mapping>
                                <mapping>
                                    <directory>/opt/datawave-ingest/datawave-${build.env}-${project.version}</directory>
                                    <recurseDirectories>true</recurseDirectories>
                                </mapping>
                                <mapping>
                                    <directory>/opt/datawave-ingest/datawave-${build.env}-${project.version}</directory>
                                    <sources>
                                        <source>
                                            <location>doc</location>
                                        </source>
                                    </sources>
                                </mapping>
                                <mapping>
                                    <directory>/opt/datawave-ingest/datawave-${build.env}-${project.version}</directory>
                                    <sources>
                                        <source>
                                            <location>${project.build.directory}/archive</location>
                                            <excludes>
                                                <!-- Leave out the bin dir since we add that below with different
													permissions -->
                                                <exclude>bin/**</exclude>
                                            </excludes>
                                        </source>
                                    </sources>
                                </mapping>
                                <mapping>
                                    <directory>/opt/datawave-ingest/datawave-${build.env}-${project.version}/bin</directory>
                                    <filemode>0555</filemode>
                                    <directoryIncluded>false</directoryIncluded>
                                    <sources>
                                        <source>
                                            <location>${project.build.directory}/archive/bin</location>
                                            <excludes>
                                                <!-- Leave out job-cache scripts since they need to be writeable -->
                                                <exclude>ingest/job-cache-env*</exclude>
                                            </excludes>
                                        </source>
                                    </sources>
                                </mapping>
                                <mapping>
                                    <directory>/opt/datawave-ingest/datawave-${build.env}-${project.version}/bin/ingest</directory>
                                    <filemode>0755</filemode>
                                    <directoryIncluded>false</directoryIncluded>
                                    <sources>
                                        <source>
                                            <location>${project.build.directory}/archive/bin/ingest</location>
                                            <includes>
                                                <!-- Make job-cache-env scripts writeable -->
                                                <include>job-cache-env*</include>
                                            </includes>
                                        </source>
                                    </sources>
                                </mapping>
                                <mapping>
                                    <directory>/opt/datawave-ingest/datawave-${build.env}-${project.version}/accumulo-warehouse/lib</directory>
                                    <username>${rpm.file.accumulo.owner}</username>
                                    <groupname>${rpm.file.accumulo.group}</groupname>
                                    <directoryIncluded>false</directoryIncluded>
                                    <dependency>
                                        <includes>
                                            <include>commons-pool:commons-pool</include>
                                            <include>org.apache.commons:commons-lang3</include>
                                            <include>com.google.protobuf:protobuf-java</include>
                                            <include>com.esotericsoftware.kryo:kryo</include>
                                            <include>org.objenesis:objenesis</include>
                                            <include>com.esotericsoftware.minlog:minlog</include>
                                            <include>com.esotericsoftware.reflectasm:reflectasm</include>
                                            <include>org.ow2.asm:asm</include>
                                            <include>io.protostuff:protostuff-api</include>
                                            <include>io.protostuff:protostuff-core</include>
                                            <include>io.protostuff:protostuff-collectionschema</include>
                                        </includes>
                                    </dependency>
                                </mapping>
                                <mapping>
                                    <directory>/opt/datawave-ingest/datawave-${build.env}-${project.version}/accumulo-warehouse/lib/ext</directory>
                                    <username>${rpm.file.accumulo.owner}</username>
                                    <groupname>${rpm.file.accumulo.group}</groupname>
                                    <directoryIncluded>false</directoryIncluded>
                                    <dependency>
                                        <includes>
                                            <include>org.apache.commons:commons-collections4</include>
                                            <include>org.apache.commons:commons-jexl</include>
                                            <include>${project.groupId}:datawave-core</include>
                                            <include>${project.groupId}:datawave-balancers</include>
                                            <include>${project.groupId}:datawave-ingest-csv</include>
                                            <include>${project.groupId}:datawave-ingest-core</include>
                                            <include>${project.groupId}:datawave-ingest-configuration</include>
                                            <include>${project.groupId}:datawave-query-core</include>
                                            <include>${project.groupId}:datawave-metrics-core</include>
                                            <include>${project.groupId}:datawave-common</include>
                                            <include>${project.groupId}:datawave-data-dictionary-core</include>
                                            <include>${project.groupId}:datawave-edge-dictionary-core</include>
                                            <include>${project.groupId}:datawave-edge-model-configuration-core</include>
                                            <include>${project.groupId}:datawave-ingest-wikipedia</include>
                                            <include>${project.groupId}:datawave-ingest-nyctlc</include>
                                            <include>gov.nsa.datawave.microservice:accumulo-utils</include>
                                            <include>gov.nsa.datawave.microservice:metadata-utils</include>
                                            <include>gov.nsa.datawave.microservice:type-utils</include>
                                            <include>gov.nsa.datawave.microservice:base-rest-responses</include>
                                            <include>gov.nsa.datawave.microservice:common-utils</include>
                                            <include>gov.nsa.datawave.webservices:datawave-ws-common</include>
                                            <include>gov.nsa.datawave.webservices:datawave-ws-common-util</include>
                                            <include>gov.nsa.datawave.webservices:datawave-ws-client</include>
                                            <include>gov.nsa.datawave.webservices:datawave-ws-query</include>
                                            <include>org.javatuples:javatuples</include>
                                            <include>com.google.code.gson:gson</include>
                                            <include>com.clearspring.analytics:stream</include>
                                            <include>org.apache.lucene:lucene-core</include>
                                            <include>com.timgroup:java-statsd-client</include>
                                            <!-- For the NGA Geometry code -->
                                            <include>mil.nga.giat:geowave-adapter-vector</include>
                                            <include>mil.nga.giat:geowave-core-geotime</include>
                                            <include>mil.nga.giat:geowave-core-store</include>
                                            <include>mil.nga.giat:geowave-core-index</include>
                                            <include>mil.nga.giat:geowave-core-ingest</include>
                                            <include>com.vividsolutions:jts</include>
                                            <include>com.google.uzaygezen:uzaygezen-core</include>
                                            <!-- for dependency injection -->
                                            <include>org.springframework:spring-aop</include>
                                            <include>org.springframework:spring-core</include>
                                            <include>org.springframework:spring-beans</include>
                                            <include>org.springframework:spring-context</include>
                                            <include>org.springframework:spring-context-support</include>
                                            <include>org.springframework:spring-expression</include>
                                            <include>aopalliance:aopalliance</include>
                                            <include>com.fasterxml.jackson.core:jackson-databind</include>
                                            <include>com.fasterxml.jackson.core:jackson-core</include>
                                            <include>com.fasterxml.jackson.core:jackson-annotations</include>
                                        </includes>
                                    </dependency>
                                </mapping>
                                <mapping>
                                    <directory>/opt/datawave-ingest/datawave-${build.env}-${project.version}/accumulo-metrics/lib/ext</directory>
                                    <username>${rpm.file.accumulo.owner}</username>
                                    <groupname>${rpm.file.accumulo.group}</groupname>
                                    <directoryIncluded>false</directoryIncluded>
                                    <dependency>
                                        <includes>
                                            <include>org.apache.commons:commons-lang3</include>
                                            <include>${project.groupId}:datawave-core</include>
                                            <include>${project.groupId}:datawave-query-core</include>
                                            <include>${project.groupId}:datawave-metrics-core</include>
                                            <include>gov.nsa.datawave.microservice:accumulo-utils</include>
                                            <include>gov.nsa.datawave.microservice:metadata-utils</include>
                                            <include>gov.nsa.datawave.microservice:type-utils</include>
                                            <include>gov.nsa.datawave.microservice:base-rest-responses</include>
                                            <include>gov.nsa.datawave.microservice:common-utils</include>
                                            <include>gov.nsa.datawave.webservices:datawave-ws-common</include>
                                            <include>gov.nsa.datawave.webservices:datawave-ws-common-util</include>
                                            <include>com.google.code.gson:gson</include>
                                            <!-- for dependency injection -->
                                            <include>org.springframework:spring-aop</include>
                                            <include>org.springframework:spring-core</include>
                                            <include>org.springframework:spring-beans</include>
                                            <include>org.springframework:spring-context</include>
                                            <include>org.springframework:spring-context-support</include>
                                            <include>org.springframework:spring-expression</include>
                                            <include>aopalliance:aopalliance</include>
                                        </includes>
                                    </dependency>
                                </mapping>
                            </mappings>
                        </configuration>
                        <executions>
                            <execution>
                                <goals>
                                    <goal>rpm</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>geoserver</id>
            <activation>
                <property>
                    <name>geoserver</name>
                </property>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <artifactId>maven-dependency-plugin</artifactId>
                        <executions>
                            <!-- In support of GeoWave tables created by the GeoWaveDataTypeHandler -->
                            <execution>
                                <id>geowave-dependencies</id>
                                <goals>
                                    <goal>unpack</goal>
                                </goals>
                                <phase>generate-resources</phase>
                                <configuration>
                                    <artifactItems>
                                        <artifactItem>
                                            <groupId>gov.nsa.datawave</groupId>
                                            <artifactId>assemble-geowave</artifactId>
                                            <classifier>dist</classifier>
                                            <type>tar.gz</type>
                                        </artifactItem>
                                    </artifactItems>
                                    <includes>**/*.jar</includes>
                                    <outputDirectory>${project.build.directory}/archive/accumulo-geowave/lib/ext</outputDirectory>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
    </profiles>
</project>
